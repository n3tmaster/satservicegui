<!DOCTYPE html>
<html>
<head>
  <title>AgroSat - Ibimet CNR</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="description" content="Migliora le tue coltivazioni attraverso una concimazione precisa e puntuale">
  <meta name="author" content="CNR Ibimet - Daniele Spinosa">
  <link rel="shortcut icon" sizes="16x16 24x24 32x32 48x48 64x64" href="/favicon.ico">

  <link rel="stylesheet" href="css/normalize.css" />
  <link rel="stylesheet" href="https://openlayers.org/en/v4.5.0/css/ol.css" type="text/css">

  <link rel="stylesheet" href="css/rome.min.css" />
  <link rel="stylesheet" href="css/pretty-checkbox.min.css" />
  <link rel="stylesheet" href="css/modal.css" />
  <link rel="stylesheet" href="css/main.css" />

  <script src="https://unpkg.com/vue"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>

<body lang="it">
  <div id="agrosat" v-cloak>
  <modal v-if="showModal" @close="showModal=false" @forward="modalStateForward">
    <h3 slot="header">{{ modalState }}</h3>
    <p slot="body" v-show="modalState=='Disegna'">
      Puoi inserire coordinate, nome località o navigare la mappa.</br>
      Trova il tuo campo e disegna i confini!
    </p>

    <p slot="body" v-show="modalState=='Osserva'">
      Seleziona la data di interesse ed osserva il tuo campo:
      <br/>se non ci sono nuvole puoi da subito valutare il vigore della tuo
      coltura o la variabilità del suolo.
    </p>

    <p slot="body" v-show="modalState=='Decidi'">
      Sei pronto per la concimazione? Indica il quantitativo delle
      unità da azoto (N/ha) che vorresti apportare al tuo campo, ti
      aiuteremo a distribuirle nel modo migliore e se possibile ti
      aiutiamo a ridurle! <br/>
      Non sei pronto?<br/>
      Allora valuta la resa potenziale del tuo campo allo stato attuale e poi penseremo
      alla concimazione.
    </p>

    <p slot="body" v-show="modalState=='Agisci'">
      Sei ha una spandiconcime rateo variabile basta scaricare la
      mappa di prescrizione georefenziata ed inserirla nel sistema
      di supporto della tua macchina. <br/>Altrimenti clicca naviga e
      potrai visualizzare direttamente la tua macchina su mappa e
      distribuire la concimazione seguendo comodamente il gps del
      tuo smartphone o tablet!
    </p>
  </modal>
  <header>
    <svg xmlns="http://www.w3.org/2000/svg" width="100" height="24" viewBox="0 0 100 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-globe">
      <circle cx="12" cy="12" r="10"></circle>
      <line x1="2" y1="12" x2="22" y2="12"></line>
      <line x1="12" y1="2" x2="12" y2="22"></line>
      <ellipse cx="12" cy="12" rx="6" ry="9">
        <animate attributeName="rx" values="6;3;6" dur="2s" repeatCount="indefinite" v-if="nitro"/>
      </ellipse>
      <text x="26" y="18" fill="currentColor" font-size="16" stroke-width="initial" textLength="70">AgroSat</text>
    </svg>
  </header>

  <nav>
    <div id="downs">
      <div class="instructions" v-show="!polygon">inizia disegnando un poligono sulla mappa.</div>
      <div id="spinnner" v-if="loading">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-settings" id="spinning-wheel"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
      </div>
      <div class="download-btn" id="ndvi-down" v-show="polygon && extractedImage">
        <a href="javascript:void(0);" id="help" v-on:click="downloadNDVI">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-download-cloud"><polyline points="8 17 12 21 16 17"></polyline><line x1="12" y1="12" x2="12" y2="21"></line><path d="M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"></path></svg>
          <small>ndvi</small>
        </a>
      </div>
    </div>
    <div id="tools">
      <a href="javascript:void(0);" id="geo-locate" title="Geo locate">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-crosshair"><circle cx="12" cy="12" r="10"></circle><line x1="22" y1="12" x2="18" y2="12"></line><line x1="6" y1="12" x2="2" y2="12"></line><line x1="12" y1="6" x2="12" y2="2"></line><line x1="12" y1="22" x2="12" y2="18"></line></svg>
      </a>

      <a href="javascript:void(0);" id="pan" title="Pan - Zoom Mode" v-on:click="panOn">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-move"><polyline points="5 9 2 12 5 15"></polyline><polyline points="9 5 12 2 15 5"></polyline><polyline points="15 19 12 22 9 19"></polyline><polyline points="19 9 22 12 19 15"></polyline><line x1="2" y1="12" x2="22" y2="12"></line><line x1="12" y1="2" x2="12" y2="22"></line></svg>
      </a>

      <a href="javascript:void(0);" id="draw-poly" v-on:click="drawPolygon" title="Draw Polygon">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-crop"><path d="M6.13 1L6 16a2 2 0 0 0 2 2h15"></path><path d="M1 6.13L16 6a2 2 0 0 1 2 2v15"></path></svg>
      </a>

      <a href="javascript:void(0);" id="help" v-on:click="showModal=true">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-help-circle"><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="17" x2="12" y2="17"></line></svg>
      </a>
    </div>
  </nav>

  <aside id="aside">
    <form>
      <div id="dates" v-show="dates.length > 0" class="sub-panel" v-bind:data-when="when"></div>

      <div id="img-format-wrap" class="sub-panel" v-show="polygon && when">
        <div class="pretty p-default">
          <input type="radio" name="format" value="rgb" v-model="format" />
          <div class="state p-success">
            <label>RGB</label>
          </div>
        </div>

        <div class="pretty p-default">
          <input type="radio" name="format" value="ndvi" v-model="format" />
          <div class="state p-success">
            <label>NDVI</label>
          </div>
        </div>
      </div>

      <!-- nitro ettaro -->
      <div id="nitro-wrap" class="sub-panel" v-show="polygon && when">
        <div class="pretty p-default p-jelly">
          <input type="checkbox" id="nitro-switch" v-model="nitro" />
          <div class="state p-success">
            <label>Concime</label>
          </div>
        </div>
        <transition name="fade">
          <div v-show="nitro" id="nitro-units">
            <p>
              uN/ha <input type="number" placeholder="0" id="un-ha" step="1" min="0" max="200" v-model="unha">
              <br/>
              <small>unit&agrave; di Azoto<br/>0 &rarr; 200</small>
            </p>
          </div>
        </transition>
      </div>
      <div id="calculations">
        <button v-show="extractedImage && !nitro" v-on:click.prevent="calcPotentialYeld">Pot.Yield</button>
        <button v-show="extractedImage && nitro && unha" v-on:click.prevent="calcNitroPotentialYeldJS">Nitro.Yield</button>
      </div>
    </form>

    <div><small id="info"></small></div>
  </aside>

  <main>
    <div id="map" class="map"></div>
    <div id="geolocation_marker">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-crosshair"><circle cx="12" cy="12" r="10"></circle><line x1="22" y1="12" x2="18" y2="12"></line><line x1="6" y1="12" x2="2" y2="12"></line><line x1="12" y1="6" x2="12" y2="2"></line><line x1="12" y1="22" x2="12" y2="18"></line></svg>
    </div>
  </main>

  <section id="legend">
    <svg width="100%" height="30">
      <defs>
        <linearGradient id="Gradient1" x1="0" y1="0" x2="100%" y2="0">
          <stop offset="0%" v-bind:stop-color="nitroColors[0]" />
          <stop offset="50%" v-bind:stop-color="nitroColors[1]" />
          <stop offset="100%" v-bind:stop-color="nitroColors[2]" />
        </linearGradient>
      </defs>
      <rect x="0" y="0" width="100%" height="100" fill= "url(#Gradient1)" stroke="none" />
      <text text-anchor="start" x="1%" y="25" fill="#1E2530" font-size="12">0</text>
      <text text-anchor="middle" x="10%" y="25" fill="#1E2530" font-size="12">0.1</text>
      <text text-anchor="middle" x="20%" y="25" fill="#1E2530" font-size="12">0.2</text>
      <text text-anchor="middle" x="30%" y="25" fill="#1E2530" font-size="12">0.3</text>
      <text text-anchor="middle" x="40%" y="25" fill="#1E2530" font-size="12">0.4</text>
      <text text-anchor="middle" x="50%" y="25" fill="#1E2530" font-size="12">0.5</text>
      <text text-anchor="middle" x="60%" y="25" fill="#1E2530" font-size="12">0.6</text>
      <text text-anchor="middle" x="70%" y="25" fill="#1E2530" font-size="12">0.7</text>
      <text text-anchor="middle" x="80%" y="25" fill="#1E2530" font-size="12">0.8</text>
      <text text-anchor="middle" x="90%" y="25" fill="#1E2530" font-size="12">0.9</text>
      <text text-anchor="end" x="100%" y="25" fill="#1E2530" font-size="12">1</text>
    </svg>
  </section>

  <footer>
    <p>&copy; 2017 Ibimet - Consiglio Nazionale delle Ricerche</p>
  </footer>

  </div> <!-- end agrosat app -->

  <!-- template for the modal component -->
  <script type="text/x-template" id="modal-template">
    <transition name="modal">
      <div class="modal-mask">
        <div class="modal-wrapper">
          <div class="modal-container">

            <div class="modal-header">
              <slot name="header"></slot>
            </div>

            <div class="modal-body">
              <slot name="body"></slot>
            </div>

            <div class="modal-footer">
              <slot name="footer">
                <button class="forward btn" v-on:click="$emit('forward')">Avanti &rArr;</button>
                <button class="close btn" v-on:click="$emit('close')">Ho Capito!</button>
              </slot>
            </div>
          </div>
        </div>
      </div>
    </transition>
  </script>

  <script src="https://openlayers.org/en/v4.5.0/build/ol.js" type="text/javascript"></script>
  <script src='js/rome.min.js'></script>
  <script src="js/core.js" type="text/javascript" charset="utf-8"></script>
</body>
</html>
